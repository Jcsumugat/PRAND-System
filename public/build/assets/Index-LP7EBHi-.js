import{r as n,j as e,H as y}from"./app-DwLtAwuT.js";import{A as N,F as v}from"./AuthenticatedLayout-DijVmoOi.js";import{F as w}from"./MagnifyingGlassIcon-xIHsCHzK.js";function L({deceased:a=[]}){const[t,c]=n.useState(null),[d,g]=n.useState(""),[m,x]=n.useState(a),[i,h]=n.useState(!0);n.useEffect(()=>{if(d.trim()==="")x(a);else{const s=d.toLowerCase();x(a.filter(r=>r.fullname.toLowerCase().includes(s)||r.tomb_number.toLowerCase().includes(s)||r.tomb_location.toLowerCase().includes(s)))}},[d,a]);const b=s=>{c(s)},p=()=>{c(null)},o=a.reduce((s,r)=>{const l=r.tomb_location||"Unknown";return s[l]||(s[l]=[]),s[l].push(r),s},{}),u=Object.keys(o).sort();return e.jsxs(N,{children:[e.jsx(y,{title:"Cemetery Map"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-200 to-orange-200 rounded-xl shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"CEMETERY MAP"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Interactive cemetery layout - ",a.length," tombs total"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:d,onChange:s=>g(s.target.value),placeholder:"Search by deceased name, tomb number, or location...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 min-h-screen",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Cemetery Grid"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>h(!0),className:`px-4 py-2 font-semibold rounded-lg transition ${i?"bg-amber-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Grid View"}),e.jsx("button",{onClick:()=>h(!1),className:`px-4 py-2 font-semibold rounded-lg transition ${i?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-amber-600 text-white"}`,children:"List View"})]})]}),i?e.jsx("div",{className:"space-y-8",children:u.map(s=>e.jsxs("div",{children:[e.jsxs("h4",{className:"text-base font-bold text-amber-700 mb-4 pb-2 border-b-2 border-amber-300",children:["üìç ",s," (",o[s].length," tombs)"]}),e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-3",children:o[s].sort((r,l)=>{const j=parseInt(r.tomb_number)||0,f=parseInt(l.tomb_number)||0;return j-f}).map(r=>e.jsxs("button",{onClick:()=>b(r),className:"p-3 bg-gradient-to-br from-amber-100 to-orange-100 border-2 border-amber-400 rounded-lg hover:from-amber-200 hover:to-orange-200 hover:border-amber-600 transition transform hover:scale-105",children:[e.jsxs("div",{className:"text-xs font-bold text-amber-900",children:["#",r.tomb_number]}),e.jsx("div",{className:"text-xs text-amber-700 truncate mt-1",children:r.fullname.split(" ")[0]})]},r.id))})]},s))}):e.jsx("div",{className:"space-y-3",children:m.length>0?m.map(s=>e.jsx("button",{onClick:()=>b(s),className:"w-full p-4 bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-300 rounded-lg hover:from-amber-100 hover:to-orange-100 hover:border-amber-500 transition text-left",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-amber-900",children:["Tomb #",s.tomb_number]}),e.jsx("div",{className:"text-sm text-gray-700 mt-1",children:s.fullname}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["üìç ",s.tomb_location]})]}),e.jsx("span",{className:"text-xs font-semibold px-2 py-1 bg-white rounded border border-amber-300 text-amber-700",children:"Click to view"})]})},s.id)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No tombs match your search."})})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 sticky top-6 max-h-96 overflow-y-auto",children:t?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Tomb Details"}),e.jsx("button",{onClick:p,className:"p-1 hover:bg-gray-100 rounded transition",children:e.jsx(v,{className:"h-5 w-5 text-gray-600"})})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold uppercase",children:"Tomb Number"}),e.jsxs("p",{className:"text-lg font-bold text-amber-700 mt-1",children:["#",t.tomb_number]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold uppercase",children:"Location"}),e.jsxs("p",{className:"text-gray-900 font-medium mt-1",children:["üìç ",t.tomb_location]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold uppercase",children:"Deceased Name"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:t.fullname})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold uppercase",children:"Life Span"}),e.jsxs("p",{className:"text-gray-900 font-medium mt-1",children:[new Date(t.birthday).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," - ",new Date(t.date_of_death).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold uppercase",children:"Next of Kin"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:t.next_of_kin_name}),t.next_of_kin_relationship&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["(",t.next_of_kin_relationship,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold uppercase",children:"Contact Number"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:t.contact_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold uppercase",children:"Payment Status"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t.payment_status==="paid"?"bg-green-100 text-green-800":t.payment_status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.payment_status.charAt(0).toUpperCase()+t.payment_status.slice(1)})})]}),t.email&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold uppercase",children:"Email"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1 break-all",children:t.email})]}),t.address&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold uppercase",children:"Address"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1 text-xs",children:t.address})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 9l6 6m0 0l-6 6m6-6l6-6m-6 6l-6-6"})}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"Click a tomb to view details"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Legend"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-green-100 to-green-200 border-2 border-green-400 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Paid"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-yellow-100 to-yellow-200 border-2 border-yellow-400 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-red-100 to-red-200 border-2 border-red-400 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Overdue"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-amber-100 to-orange-100 border-2 border-amber-400 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"All Tombs"})]})]})]})]})]})}export{L as default};
